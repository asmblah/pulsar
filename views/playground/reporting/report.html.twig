{% extends '@pulsar/pulsar/components/tab.html.twig' %}

{%- block actions_left -%}
    {{
        html.actions_menu({
            'items': [
                [
                    {
                        'label': 'Edit report settings',
                        'href': '#',
                        'icon': 'pencil'
                    },
                    {
                        'label': 'New clone of this report',
                        'href': '#',
                        'icon': 'copy'
                    }
                ],
                [
                    {
                        'label': 'Add schedule',
                        'href': '#',
                        'icon': 'time'
                    }
                ],
                [
                    {
                        'label': 'Export as CSV',
                        'href': '#',
                        'icon': 'file'
                    },
                    {
                        'label': 'Export as PDF',
                        'href': '#',
                        'icon': 'file'
                    },
                    {
                        'label': 'Print',
                        'href': '#',
                        'icon': 'print'
                    }
                ],
                [
                    {
                        'label': 'Delete',
                        'href': '#',
                        'icon': 'remove'
                    }
                ],
            ]
        })
    }}
    {{
        html.button_dropdown({
            'label': html.icon('time') ~ ' 0',
            'class': 'dropdown--medium',
            'items': ['
                <h2 class="dropdown__title">No Schedules' ~
                html.button({
                    'label': html.icon('plus'),
                    'data-toggle': 'modal',
                    'href': '#schedule-add',
                    'type': 'link'
                }) ~ '</h2>
                <div class="dropdown__body">
                    <p>A schedule runs this report (with the current settings) on a regular basis and emails the results to one or more people</p>' ~
                    html.button({
                        'label': html.icon('plus') ~ ' Add Schedule',
                        'class': 'btn--primary dropdown__action',
                        'data-toggle': 'modal',
                        'href': '#schedule-add',
                        'type': 'link'
                    }) ~'
                </div>
            ']
        })
    }}
{%- endblock -%}

{%- block actions_right -%}
    {{
        html.button({
            'label': 'Export',
            'class': 'btn--primary'
        })
    }}
{%- endblock -%}

{% block tab_content %}

    <div class="report">
        <div class="report__settings">
            <span class="report__timeframe">Created within last 30 days</span>
            {{
                html.button_dropdown({
                    'label': html.icon('calendar') ~ ' Mon 1st July 2016 &mdash; Fri 30th July, 2016'
                })
            }}
            {{
                html.button_group({
                    'buttons': [
                        html.button({ label: html.icon('bar-chart') }),
                        html.button({ label: html.icon('table') })
                    ]
                })
            }}
        </div>

        <h1 class="report__title">All content owned by Paul Stanton</h1>
        <span class="report__info">56 items found &mdash; Last run 01/08/2016 12:34pm by Paul Stanton</span>

        <div class="report__data">

            <div class="report__chart ct-chart"></div>

            <table class="table datatable table--full">
                <thead>
                    <tr>
                        <th class="table-responsive"></th>
                        <th class="table-selection"></th>
                        <th><a href="#">Content title</a></th>
                        <th><a href="#">Type</a></th>
                        <th><a href="#">Created</a></th>
                    </tr>
                </thead>
                <tbody>
                    {% for i in 0..50 %}
                    <tr>
                        <td class="table-responsive">
                            {{ html.icon('plus-sign', { 'class': 'table-child-toggle' }) }}
                        </td>
                        <td class="table-selection">
                            {{ html.icon('unchecked', { 'class': 'table-row-select js-select' }) }}
                        </td>
                        <td><a href="#">My awesome document title</a></td>
                        <td><a href="#">document</a></td>
                        <td>01/02/2016</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="modal modal--large" id="schedule-add">
        <div class="modal__dialog">
          <div class="modal__content">
            <div class="modal__header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal__title">Add Schedule</h4>
            </div>
            <div class="modal__body">
            {{ form.create() }}

                {{
                    form.text({
                        'label': 'Schedule name',
                        'class': 'form__group--full',
                        'help': 'Used in the email subject line. Must be unique',
                        'required': true,
                        'autofocus': true
                    })
                }}

                {{
                    form.choice({
                        'label': 'Run report on',
                        'class': 'choice--bubbles choice--bubbles-inline',
                        'multiple': true,
                        'optimize': 'few',
                        'required': true,
                        'options': [
                            {
                                'label': 'MO',
                                'value': 'mon',
                                'name': 'days'
                            },
                            {
                                'label': 'TU',
                                'value': 'tue',
                                'name': 'days'
                            },
                            {
                                'label': 'WE',
                                'value': 'wed',
                                'name': 'days'
                            },
                            {
                                'label': 'TH',
                                'value': 'thu',
                                'name': 'days'
                            },
                            {
                                'label': 'FR',
                                'value': 'fri',
                                'name': 'days'
                            },
                            {
                                'label': 'SA',
                                'value': 'sat',
                                'name': 'days'
                            },
                            {
                                'label': 'SU',
                                'value': 'sun',
                                'name': 'days'
                            }
                        ]
                    })
                }}

                {{
                    form.text({
                        'label': 'At',
                        'class': 'form__group--small',
                        'placeholder': 'hh:mm',
                        'required': true,
                        'help': 'Emails will be sent when the report has finished building'
                    })
                }}

                {{
                    form.content({
                        'label': 'Start schedule',
                        'value': 'Immediately ' ~ html.link({'href': '#', 'label': 'change'}),
                        'class': 'form__group--full'
                    })
                }}

                {{
                    form.choice({
                        'label': 'Repeat',
                        'options': [
                            {
                                'label': 'Every week',
                                'value': 'weekly'
                            },
                            {
                                'label': 'Every 2 weeks',
                                'value': 'fortnightly'
                            },
                            {
                                'label': 'Every month',
                                'value': 'monthly'
                            },
                            {
                                'label': 'Every 6 months',
                                'value': 'six-monthly'
                            },
                            {
                                'label': 'Every year',
                                'value': 'yearly'
                            }
                        ]
                    })
                }}

                {{
                    form.content({
                        'label': 'End repeat',
                        'value': 'Never (run indefinitely) ' ~ html.link({'href': '#', 'label': 'change'}),
                        'class': 'form__group--full'
                    })
                }}

                {{
                    form.text({
                        'label': 'Email report to',
                        'class': 'form__group--full',
                        'placeholder': 'Email address',
                        'guidance': 'Recipients will be BCCâ€™d',
                        'required': true
                    })
                }}

            </div>
            <div class="modal__footer">
                {{
                    form.end({
                        'actions': [
                            form.submit({
                                'class': 'btn--primary',
                                'label': 'Save'
                            }),
                            html.button({
                                'label': 'Cancel',
                                'class': 'btn--naked',
                                'data-dismiss': 'modal'
                            })
                        ]
                    })
                }}
            </div>
          </div><!-- /.modal__content -->
        </div><!-- /.modal__dialog -->
      </div><!-- /.modal -->
{% endblock %}

{% block javascript %}

{% endblock %}
