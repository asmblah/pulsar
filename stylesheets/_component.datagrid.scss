// Data grid view
.table--datagrid {
  background-color: #fff;
  border-collapse: separate;
  outline: 1px solid color(border);
  width: 100%;

  @include ie-lte(7) {
    border-collapse: collapse;
  }

  // Rows
  tr {
    line-height: $line-height-base;
    position: relative;

    @include respond-min($screen-tablet) {
      position: static;
    }

    th,
    td {
      height: floor($line-height-base * 1.8);
      padding: 0 $gutter-width / 2;
      text-align: left;

      @include respond-min($screen-tablet) {
        border-bottom: 1px solid color(border);
      }

      @include respond-max($screen-tablet) {
        height: $line-height-base;
      }

      &.preview {
        @include respond-min($screen-tablet) {
          text-align: center;
        }

        img {
          height: 30px;
          vertical-align: middle;
          width: 30px;
        }
      }

      &.centered {
        @include respond-min($screen-tablet) {
          text-align: center;
        }
      }

      &.shrink-to-fit {
        @include respond-min($screen-tablet) {
          width: 1px;
        }
      }

      &.no-wrap {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
  }

  // Set up tables for smaller viewports
  tr th {
    background-color: #fff;
    display: none;

    @include respond-min($screen-tablet) {
      display: table-cell;
    }
  }

  tr td {
    display: table;
    padding-left: 0;
    vertical-align: baseline;
    width: 100%;

    @include respond-min($screen-tablet) {
      display: table-cell;
      padding: 5px $gutter-width / 2;

      vertical-align: middle;
      width: auto;

      &::before {
        display: none;
      }
    }

    &::before {
      background-color: darken($white, 5%);
      content: attr(data-table-header);
      display: inline-block;
      font-family: $font-family-regular;
      font-weight: normal;
      height: 100%;
      min-width: 35%;
      padding: $padding-small-vertical ($gutter-width / 2) 0;
      margin-right: $gutter-width / 2;
      text-align: right;
      vertical-align: baseline;
      width: auto;
    }

    &:last-child {
      border-bottom: 1px solid color(border);
    }
  }

  // Row effects
  tbody > tr {
    &:hover {
      background-color: $off-white;
    }
  }

  // Actions column
  .row__actions {
    height: auto;
    padding-top: $padding-small-vertical;
    position: absolute;
    left: $gutter-width * .75;
    width: auto;

    @include respond-max($screen-tablet) {
      background-color: transparent;
    }

    @include respond-min($screen-phone) {
      left: $gutter-width * 1.75;
    }

    @include respond-min($screen-tablet) {
      height: $line-height-base * 1.8;
      min-width: 50px;
      padding: 0;
      position: static;
      text-align: center;
      width: 50px;
    }

    &::before {
      display: none;
    }

    // First column after the actions doesn't need so much space
    + th,
    + td {
      padding-left: 0;
    }
  }

  .label {
    white-space: normal;
  }
}

/* Fixes gaps in grey bg on table headers in responsive views */
@include respond-max($screen-tablet) {
    .table--datagrid tr td::before {
        padding-bottom: 8px !important;
    }
}


@include ie-lte(9) {

    .table--datagrid tr {
        position: relative;
    }

    .table--datagrid td {
        border-bottom: 1px solid color(border);
    }

    /* Fixes responsive table headings being hidden (in pulsar) in mobile views for < IE9 */
    .table--datagrid tr th {
        display: table-cell;
    }

    /* Fix grey boxes in <IE10  */
    .table--datagrid tr td::before {
        display: none !important;
    }
}

tr.row--highlight {
  @include highlight-row($blue);
}

tr.row--success-highlight {
  @include highlight-row($success-color);
}

tr.row--danger-highlight {
  @include highlight-row($danger-color);
}

tr.row--warning-highlight {
  @include highlight-row($warning-color);
}

tr.row--success {
  @include highlight-row($success-color);

  > td {
    background-color: lighten($success-color, 25%);

    &::before {
      background-color: lighten($success-color, 20%);
    }
  }

  &:hover > td {
    background-color: lighten($success-color, 23%);

    @include respond-max($screen-tablet) {
      &.row__actions {
        background-color: lighten($success-color, 18%);
      }
    }

    &::before {
      background-color: lighten($success-color, 18%);
    }
  }
}

tr.row--danger {
  @include highlight-row($danger-color);

  > td {
    background-color: lighten($danger-color, 25%);

    &::before {
      background-color: lighten($danger-color, 20%);
    }
  }

  &:hover > td {
    background-color: lighten($danger-color, 24%);

    @include respond-max($screen-tablet) {
      &.row__actions {
        background-color: lighten($danger-color, 19%);
      }
    }

    &::before {
      background-color: lighten($danger-color, 19%);
    }
  }
}

tr.row--warning {
  @include highlight-row($warning-color);

  > td {
    background-color: lighten($warning-color, 25%);

    @include respond-max($screen-tablet) {
      &.row__actions {
        background-color: lighten($warning-color, 20%);
      }
    }

    &::before {
      background-color: lighten($warning-color, 20%);
    }
  }

  &:hover > td {
    background-color: lighten($warning-color, 23%);

    @include respond-max($screen-tablet) {
      &.row__actions {
        background-color: lighten($warning-color, 18%);
      }
    }

    &::before {
      background-color: lighten($warning-color, 18%);
    }
  }
}

tr.is-selected {
  @include highlight-row($blue);

  > td {
    background-color: lighten($blue, 50%);

    &::before {
      background-color: lighten($blue, 45%);
    }
  }

  &:hover > td {
    background-color: lighten($blue, 48%);

    @include respond-max($screen-tablet) {
      &.row__actions {
        background-color: lighten($blue, 43%);
      }
    }

    &::before {
      background-color: lighten($blue, 43%);
    }
  }
}

tr.row--no-results td {
  padding: 1em 0;
  text-align: center;
}

// I know this ain't following bem, but this is really old css and it needs to be moved over to datatables anyway
.datagrid--underlined {
    border-bottom: 1px solid color(border);
    outline: none;
}

.datagrid--fixed {
    table-layout: fixed;
}
